{% extends 'recipes/base.html' %}
 {% load  staticfiles %}
{% load bootstrap4 %}
{% block stylesheets %}
        {% bootstrap_css %}
    <link rel="stylesheet" type="text/css" href="{% static "css/dropzone.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/basic.min.css" %}">
{% endblock %}

{% block title %}
    Manage medias of a recipe
{% endblock %}

{% block content %}
   <h2>Manage media</h2>
    <form action="{% url "recipes:image-upload-ajax" recipe.id  %}" method="post" enctype="multipart/form-data" class="dropzone">
        {% csrf_token %}
    {% buttons %}
            <button type="submit" class="btn btn-primary">Submit</button>
    {% endbuttons %}
    </form>

{% endblock %}

{% block javascripts %}

    <script type="text/javascript" src="{% static "js/dropzone.js" %}"></script>
        <script type="text/javascript">
            Dropzone.options.myDropzone = {

                // Prevents Dropzone from uploading dropped files immediately
                autoProcessQueue : false,

                init : function() {
                    var submitButton = document.querySelector("#submit-all")
                    myDropzone = this;

                    submitButton.addEventListener("click", function() {
                        myDropzone.processQueue();
                        // Tell Dropzone to process all queued files.
                    });

                    // You might want to show the submit button only when
                    // files are dropped here:
                    this.on("addedfile", function() {
                        // Show submit button here and/or inform user to click it.
                    });

                }
            };
        </script>
{% endblock %}